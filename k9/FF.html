<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- August 4, 2021

Copyright (C) 2020 John Estrada -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>FF (Shakti (k9) tutorial)</title>

<meta name="description" content="FF (Shakti (k9) tutorial)">
<meta name="keywords" content="FF (Shakti (k9) tutorial)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html" rel="start" title="Top">
<link href="index.html" rel="up" title="Top">
<link href="Tables.html" rel="next" title="Tables">
<link href="I_002fO.html" rel="prev" title="I/O">
<style type="text/css">
<!--
/* spacing */


a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
.cartouche{
    border: none;
    background: lightgrey;
}

table, th, td{
  table-layout: auto;
  border-collapse: collapse;
  border: 1px solid blue;
  font-family: monospace; 
}

th, td {
  padding: 5px;     
  font-family: monospace; 
}

tr:nth-child(1) {
/*    background-color:lightsteelblue; // Replace it with your desired color */
}

.menu{
    border: none;
}

table.menu td{ 
    padding: 1px;
    border: none;
    font-family: sansserif;
}

table.menu th{ 
    padding: 1px;
    border: none;
    font-family: sansserif;
}




-->
</style>


</head>

<body lang="en">
<span id="FF"></span><div class="header">
<p>
Next: <a href="Tables.html" accesskey="n" rel="next">Tables</a>, Previous: <a href="I_002fO.html" accesskey="p" rel="prev">I/O</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<hr>
<span id="Foreign-Functions"></span><h2 class="chapter">12 Foreign Functions</h2>

<div class="example">
<pre class="example"><a href="#python">python</a>:from k import k;k('+',2,3);<a href="#nodejs">nodejs</a>:k=require('k').k;k('+',2,3)
*5: <a href="#ffi">ffi</a>/<a href="#import">import</a>
</pre></div>

<p>Enterprise only
</p>
<p>k9 is able to interface with other programing laguages (python and nodejs) via shared libraries and the foreign function interface (ffi).
</p>
<span id="python"></span><span id="python-1"></span><h3 class="section">12.1 python</h3>
<p>In order to have python call k, one has to download the shared object file (k.so for linux and m.so for mac) and save it in the appropriate directory.
</p>
<div class="example">
<pre class="example">user1@hw1:~$ python3 -m site --user-site
/Users/user1/Library/Python/3.8/lib/python/site-packages
</pre></div>

<p>Once the file is stored (and it must be called k.so even on the mac) then one can start a python session and call k.
</p>
<div class="example">
<pre class="example">user1@hw1:~$ python3
Python 3.8.5 (v3.8.5:580fbb018f, Jul 20 2020, 12:11:27) 
[Clang 6.0 (clang-600.0.57)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import k
&gt;&gt;&gt; k.k('x:5?10.')
&gt;&gt;&gt; k.k('x')
[7.691266643814743, 6.843659253790975, 6.399056380614638, 9.637191963847727, 4.250652831979096]
&gt;&gt;&gt; len(k.k('x'))
5
&gt;&gt;&gt; 
</pre></div>

<span id="nodejs"></span><span id="nodejs-1"></span><h3 class="section">12.2 nodejs</h3>
<p>TBD
</p>
<span id="ffi"></span><span id="ffi-_21d2-5_003a"></span><h3 class="section">12.3 ffi &rArr; 5:</h3>

<p>Load shared library.
</p>
<p>Contents of file &rsquo;a.c&rsquo;
</p><div class="example">
<pre class="example">int add1(int x){return 1+x;}
int add2(int x){return 2+x;}
int indx(int x[],int y){return x[y];}
</pre></div>

<p>Compile into a shared library (done on macos here)
</p><div class="example">
<pre class="example">% clang -dynamiclib -o a.so a.c
</pre></div>

<p>Load the shared library into the session.
</p><div class="example">
<pre class="example">&nbsp;f:&quot;./dev/a.so&quot;5:{add1:&quot;i&quot;;add2:&quot;i&quot;;indx:&quot;Ii&quot;}
&nbsp;f[`add1] 12
13
&nbsp;f[`indx][12 13 14;2]
14
</pre></div>

<span id="import"></span><span id="import-_21d2-5_003ax"></span><h3 class="section">12.4 import &rArr; 5:x</h3>
<p>TBD
</p>



</body>
</html>
