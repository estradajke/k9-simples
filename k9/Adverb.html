<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- December 28, 2020

Copyright (C) 2020 John Estrada -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Adverb (Shakti (k9) tutorial)</title>

<meta name="description" content="Adverb (Shakti (k9) tutorial)">
<meta name="keywords" content="Adverb (Shakti (k9) tutorial)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html" rel="start" title="Top">
<link href="index.html" rel="up" title="Top">
<link href="Noun.html" rel="next" title="Noun">
<link href="Verb.html" rel="prev" title="Verb">
<style type="text/css">
<!--
/* spacing */


a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
.cartouche{
    border: none;
    background: lightgrey;
}

table, th, td{
  table-layout: auto;
  border-collapse: collapse;
  border: 1px solid blue;
  font-family: monospace; 
}

th, td {
  padding: 5px;     
  font-family: monospace; 
}

tr:nth-child(1) {
/*    background-color:lightsteelblue; // Replace it with your desired color */
}

.menu{
    border: none;
}

table.menu td{ 
    padding: 1px;
    border: none;
    font-family: sansserif;
}

table.menu th{ 
    padding: 1px;
    border: none;
    font-family: sansserif;
}




-->
</style>


</head>

<body lang="en">
<span id="Adverb"></span><div class="header">
<p>
Next: <a href="Noun.html" accesskey="n" rel="next">Noun</a>, Previous: <a href="Verb.html" accesskey="p" rel="prev">Verb</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>
<hr>
<span id="Adverbs"></span><h2 class="chapter">3 Adverbs</h2>
<p>This chapter may be one of the most difficult for users new to array langauges but one must master adverbs to exploit the full power of k9.  Nouns and verbs naturally come but adverbs need to be learned so that one can reach for them when needed.
</p>
<div class="example">
<pre class="example">Adverb
f/  <a href="#scan">over</a>  V/ <a href="#join">join</a>
f\  <a href="#scan">scan</a>  V\ <a href="#split">split</a>
f'  <a href="#each">each</a>
f': <a href="#eachp">eachp</a>
f/: <a href="#eachr">eachr</a> (n;f)/:<a href="#cover">over</a> 
f\: <a href="#eachl">eachl</a> (n;f)\:<a href="#cscan">scan</a> 
</pre></div>

<p>Adverbs modify verbs to operative iteratively over nouns.  This previous sentence likely will  make sense only once you understand it so let&rsquo;s jump into an example.  Imagine you have a list of 4 lists.  Using <code>first</code> you will retrieve the first sub-list.  In order to retrieve the first element of each sub-list you&rsquo;ll have to modify the function <code>first</code> with a modifier <code>each</code>.
</p>
<div class="example">
<pre class="example">x: (1 2; 3 4; 5 6; 7 8)
 *x
1 2
 *'x
1 3 5 7
</pre></div>

<span id="over"></span><span id="over-_21d2-f_002fx"></span><h3 class="section">3.1 over &rArr; f/x</h3>
<p>Over has the same function as <a href="#scan">scan</a> but returns only the last value.
</p>
<span id="scan"></span><span id="scan-_21d2-f_005cx"></span><h3 class="section">3.2 scan &rArr; f\x</h3>
<p>Compute f[x;y] such that f<sub>i</sub>=f[f<sub>i-1</sub>;x<sub>i</sub>].
</p>
<table>
<tr><td><b>i</b></td><td><b>x</b></td><td><b>f[x]</b></td><td><b>a f[x]</b></td><td><b>x:0 1 4 9 16 25</b></td><td><b>+\x</b></td><td><b>3+\x</b></td><td><b>+/x</b></td><td><b>3+/x</b></td></tr>
<tr><td>0</td><td>x<sub>0</sub></td><td>x<sub>0</sub></td><td>f<sub>0</sub>[a;x<sub>0</sub>]</td><td>0</td><td>0</td><td>3</td><td></td><td></td></tr>
<tr><td>1</td><td>x<sub>1</sub></td><td>f<sub>1</sub>[f<sub>0</sub>;x<sub>1</sub>]</td><td>f<sub>1</sub>[f<sub>0</sub>;x<sub>1</sub>]</td><td>1</td><td>1</td><td>4</td><td></td><td></td></tr>
<tr><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td></td><td></td></tr>
<tr><td>j</td><td>x<sub>j</sub></td><td>f<sub>j</sub>[f<sub>j-1</sub>;x<sub>j</sub>]</td><td>f<sub>j</sub>[f<sub>j-1</sub>;x<sub>j</sub>]</td><td>..</td><td>..</td><td>..</td><td></td><td></td></tr>
<tr><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td></td><td></td></tr>
<tr><td>n-2</td><td>x<sub>n-2</sub></td><td>f<sub>n-2</sub>[f<sub>n-3</sub>;x<sub>n-2</sub>]</td><td>f<sub>n-2</sub>[f<sub>n-3</sub>;x<sub>n-2</sub>]</td><td>16</td><td>30</td><td>33</td><td></td><td></td></tr>
<tr><td>n-1</td><td>x<sub>n-1</sub></td><td>f<sub>n-1</sub>[f<sub>n-2</sub>;x<sub>n-1</sub>]</td><td>f<sub>n-1</sub>[f<sub>n-2</sub>;x<sub>n-1</sub>]</td><td>25</td><td>55</td><td>58</td><td>55</td><td>58</td></tr>
</table>


<p>An example
</p>
<div class="example">
<pre class="example"> (,\)(&quot;a&quot;;&quot;b&quot;;&quot;c&quot;)   / scan and cat to build up a list
a
ab
abc
 +\1 20 300          / scan and plus to sum over a list
1 21 321

 {y+10*x}\1 20 300   / scan and user func
1 30 600

 {y+10*x}/1 20 300   / over and user func
600
</pre></div>

<span id="join"></span><span id="join-_21d2-V_002fx"></span><h3 class="section">3.3 join &rArr; V/x</h3>
<p>Join a list of strings x using character V between each pair.
</p>
<div class="example">
<pre class="example"> &quot;-&quot;/(&quot;Some&quot;;&quot;random text&quot;;&quot;plus&quot;;,&quot;.&quot;)
&quot;Some-random text-plus-.&quot;
</pre></div>

<p>The notaion V/x converts a list of integers x via base V into base 10. In the example below, assuming 2 0 1 are digits in base 8, they convert to  1 + (0*8) + (2*8*8) = 129
</p>
<div class="example">
<pre class="example"> 8/2 0 1  
129
</pre></div>

<span id="split"></span><span id="split-_21d2-V_005cx"></span><h3 class="section">3.4 split &rArr; V\x</h3>
<p>Split the string x using character V to determine the locations.
</p>
<div class="example">
<pre class="example"> &quot; &quot;\&quot;Here is a short sentence.&quot;
Here     
is       
a        
short    
sentence.
</pre></div>

<p>V\x splits a number x into base V digits.
</p>
<div class="example">
<pre class="example"> 8\129
2 0 1
</pre></div>

<span id="each"></span><span id="each-_21d2-f_0027x"></span><h3 class="section">3.5 each &rArr; f&rsquo;x</h3>
<p>Apply function f to each value in list x in a single thread.  Multithread operation is done with <a href="#eachp">eachp</a>.  
</p>
<div class="example">
<pre class="example">&nbsp;*((1 2 3);4;(5 6);7)   / first element of the list
1 2 3

&nbsp;*'((1 2 3);4;(5 6);7)  / first element of each element
1 4 5 7
</pre></div>

<span id="eachp"></span><span id="eachp-_21d2-f_0027_003a_005bx_003by_005d"></span><h3 class="section">3.6 eachp &rArr; f&rsquo;:[x;y]</h3>
<p>Apply f[x;y] using the prior value of y, eg. f[y<sub>i</sub>;y<sub>i-1</sub>].  f<sub>0</sub> returns f[y<sub>0</sub>;x].
</p>
<div class="example">
<pre class="example">&nbsp;,':[`x;(`$&quot;y&quot;,'$!5)]
y0 x 
y1 y0
y2 y1
y3 y2
y4 y3

&nbsp;%':[100;100 101.9 105.1 102.3 106.1] / compute returns
1 1.019 1.031403 0.9733587 1.037146

&nbsp;100%':100 101.9 105.1 102.3 106.1    / using infix notation
1 1.019 1.031403 0.9733587 1.037146
</pre></div>

<p>Additionally eachp (&rsquo;:) is a multithreaded (parallel) each.  This will allow a function to run using multiple threads over a list of arguments.
</p>
<div class="example">
<pre class="example">\t {L:xrand 1.;sum L%sin L*cos L*sin L+L*L}':8#_50e6 / multiple threads
831

\t {L:xrand 1.;sum L%sin L*cos L*sin L+L*L}'8#_50e6  / single thread
1202
</pre></div>

<span id="eachr"></span><span id="eachr-_21d2-f_002f_003ax"></span><h3 class="section">3.7 eachr &rArr; f/:x</h3>
<p>Apply f[x;y] to each value of y, i.e. the right one.
</p>
<div class="example">
<pre class="example"> (!2)+/:!3
0 1
1 2
2 3

 {x+10*y}/:[!2;!3]
0 1  
10 11
20 21
</pre></div>

<span id="eachl"></span><span id="eachl-_21d2-f_005c_003ax"></span><h3 class="section">3.8 eachl &rArr; f\:x</h3>
<p>Apply f[x;y] to each value of x, i.e. the left one.
</p>
<div class="example">
<pre class="example"> (!2)+\:!3
0 1 2
1 2 3

 {x+10*y}\:[!2;!3]
0 10 20
1 11 21
</pre></div>

<span id="cover"></span><span id="Converge-Over-_21d2-f_002f_003ax-or-_0028n_003bf_0029_002f_003ax"></span><h4 class="subsection">3.8.1 Converge Over &rArr; f/:x or (n;f)/:x</h4>
<p>Converge Over is the same function as <a href="#cscan">Converge Scan</a> but only returns the final value(s).
</p>
<div class="example">
<pre class="example"> r:((1;2);3;(,4));r
1 2
3  
,4 

 ,//:r  / raze over the list until it converges to a flat list
1 2 3 4
</pre></div>

<span id="cscan"></span><span id="Converge-Scan-_21d2-f_005c_003ax-or-_0028n_003bf_0029_005c_003ax"></span><h4 class="subsection">3.8.2 Converge Scan &rArr; f\:x or (n;f)\:x</h4>
<p>Compute function f where f<sub>i</sub>=f[f<sub>i-1</sub>] and f<sub>0</sub>=x.  If n is specified then it is either (DO) the number of iterations or (WHILE) a function returning a non-zero result.  
</p>
<div class="example">
<pre class="example">  {x*x}\:.99           / converge to value
0.99 0.9801 0.9605961 ... 1.323698e-18 1.752177e-36 0.

 (3;{x*x})\:.99        / do 3 times, return 4 values (first is initial)
0.99 0.9801 0.960596 0.9227448

 (.5&lt;;{x*x})\:.99      / while .5 &lt; r, i.e. r is greater than 0.5
0.99 0.9801 0.960596 0.9227448 0.8514579 0.7249806 0.5255968 0.276252

 (4;{x,x+/x+1})\:,0    / do function 4 times
,0                                         
0 1                                        
0 1 3 4                                    
0 1 3 4 12 13 15 16                        
0 1 3 4 12 13 15 16 72 73 75 76 84 85 87 88

 (10&gt;#;{x,x+/x+1})\:,0 / while output is less than 10 long
,0                                         
0 1                                        
0 1 3 4                                    
0 1 3 4 12 13 15 16                        
0 1 3 4 12 13 15 16 72 73 75 76 84 85 87 88

 x:3 4 2 1 4 99        / until output is x
 x\:0
0 3 1 4

 / the latter example worked out manually
 x 0
3
 x 3
1
 x 1
4
 x 4                   / x[4]=4 so will stop
4
</pre></div>



<hr>
<div class="header">
<p>
Next: <a href="Noun.html" accesskey="n" rel="next">Noun</a>, Previous: <a href="Verb.html" accesskey="p" rel="prev">Verb</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; </p>
</div>



</body>
</html>
