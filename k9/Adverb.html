<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- February 16, 2022

Copyright (C) 2020 John Estrada -->
<title>Adverb (Shakti (k9) tutorial)</title>

<meta name="description" content="k programming tutorial, Shakti (k9) tutorial">
<meta name="keywords" content="Adverb (Shakti (k9) tutorial)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="index.html" rel="up" title="Top">
<link href="Noun.html" rel="next" title="Noun">
<link href="Verb.html" rel="prev" title="Verb">
<style type="text/css">
<!--
/* spacing */


a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
.cartouche{
    border: none;
    background: lightgrey;
}

table, th, td{
  table-layout: auto;
  border-collapse: collapse;
  border: 1px solid blue;
  font-family: monospace; 
}

th, td {
  padding: 5px;     
  font-family: monospace; 
}

tr:nth-child(1) {
/*    background-color:lightsteelblue; // Replace it with your desired color */
}

.menu{
    border: none;
}

table.menu td{ 
    padding: 1px;
    border: none;
    font-family: sansserif;
}

table.menu th{ 
    padding: 1px;
    border: none;
    font-family: sansserif;
}




-->
</style>


</head>

<body lang="en">
<div class="chapter" id="Adverb">
<div class="header">
<p>
Next: <a href="Noun.html" accesskey="n" rel="next">Noun</a>, Previous: <a href="Verb.html" accesskey="p" rel="prev">Verbs</a>, Up: <a href="index.html" accesskey="u" rel="up">k9: Manual</a> &nbsp; </p>
</div>
<hr>
<span id="Adverbs"></span><h2 class="chapter">3 Adverbs</h2>
<p>This chapter may be one of the most difficult for users new to array langauges but one must master adverbs to exploit the full power of k9.  Nouns and verbs naturally come but adverbs need to be learned so that one can reach for them when needed.
</p>
<div class="example">
<pre class="example">Adverb
   f'  <a href="#each">each</a>
[x]f/  <a href="#scan">over</a>      c/ <a href="#join">join</a>
[x]f\  <a href="#scan">scan</a>      c\ <a href="#split">split</a>
[y]f': <a href="#eachprior">eachprior</a>
   f/: <a href="#eachright">eachright</a> g/:<a href="#cover">over</a> 
   f\: <a href="#eachleft">eachleft</a>  g\:<a href="#cscan">scan</a> 
</pre></div>

<p>Adverbs modify verbs to operative iteratively over nouns.  This previous sentence likely will  make sense only once you understand it so let&rsquo;s jump into an example.  Imagine you have a list of 4 lists.  Using <code>first</code> you will retrieve the first sub-list.  In order to retrieve the first element of each sub-list you&rsquo;ll have to modify the function <code>first</code> with a modifier <code>each</code>.
</p>
<div class="example">
<pre class="example"> x:(1 2; 3 4; 5 6; 7 8);x
1 2
3 4
5 6
7 8

*x   / first
1 2

*'x  / each first
1 3 5 7
</pre></div>

<p>Adverbs are also used where one might use a <code>for</code>, <code>do</code>, or <code>while</code> loop to calculate over a list of value or recursively until a condition is met.
</p>
<div class="example">
<pre class="example"> f:{x*y}   
 f\1 .1 .1 .1 / f\ scan over list
1    
0.1  
0.01 
0.001

 g:{x*x}
 g\:.99       / g\: scan until convergence
0.99 0.9801 0.960596 .. 8.87948e-287 0
</pre></div>

<span id="each"></span><ul class="section-toc">
<li><a href="#each-_21d2-f_0027x" accesskey="1">each &rArr; f&rsquo;x</a></li>
<li><a href="#over-_21d2-f_002fy-or-x-f_002fy" accesskey="2">over &rArr; f/y or x f/y</a></li>
<li><a href="#scan-_21d2-f_005cy-or-x-f_005cy" accesskey="3">scan &rArr; f\y or x f\y</a></li>
<li><a href="#join-_21d2-c_002fx" accesskey="4">join &rArr; c/x</a></li>
<li><a href="#split-_21d2-c_005cx" accesskey="5">split &rArr; c\x</a></li>
<li><a href="#eachprior-_21d2-f_0027_003a_005bx_003by_005d-or-y-f_0027_003ax" accesskey="6">eachprior &rArr; f&rsquo;:[x;y] or y f&rsquo;:x</a></li>
<li><a href="#eachright-_21d2-f_002f_003a_005bx_003by_005d" accesskey="7">eachright &rArr; f/:[x;y]</a></li>
<li><a href="#eachleft-_21d2-f_005c_003a_005bx_003by_005d" accesskey="8">eachleft &rArr; f\:[x;y]</a></li>
<li><a href="#Converge-Over-_21d2-g_002f_003ax-or-_0028n_003bg_0029_002f_003ax" accesskey="9">Converge Over &rArr; g/:x or (n;g)/:x</a></li>
<li><a href="#Converge-Scan-_21d2-g_005c_003ax-or-_0028n_003bg_0029_005c_003ax">Converge Scan &rArr; g\:x or (n;g)\:x</a></li>
</ul>
<div class="section" id="each-_21d2-f_0027x">
<h3 class="section">3.1 each &rArr; f&rsquo;x</h3>
<p>Apply function f to each value in list x in a single thread.  Multithread operation is done with <a href="#eachprior">eachprior</a>.  
</p>
<div class="example">
<pre class="example"> *((1 2 3);4;(5 6);7)   / first element of the list
1 2 3

 *'((1 2 3);4;(5 6);7)  / first element of each element
1 4 5 7

 !3                     / simple list
0 1 2
 +/!3                   / sum of the list
3
 2#'!3                  / take 5 copies of the list
0 0
1 1
2 2
 +/2#'!3                / sum
3 3
 +/'2#'!3               / sum each, eg. (0 1 2)+(0 1 2)
0 2 4
</pre></div>

<span id="over"></span></div>
<div class="section" id="over-_21d2-f_002fy-or-x-f_002fy">
<h3 class="section">3.2 over &rArr; f/y or x f/y</h3>
<p>Over has the same function as <a href="#scan">scan</a> but returns only the last value.
</p>
<span id="scan"></span></div>
<div class="section" id="scan-_21d2-f_005cy-or-x-f_005cy">
<h3 class="section">3.3 scan &rArr; f\y or x f\y</h3>
<p>Compute f, a function of two arguments, over list y with optional initial value x.  On the first iteration return y<sub>0</sub>.  On each subsequent iteration function will be called with previous output and the next element of y as arguments, i.e. f<sub>i</sub>=f[f<sub>i-1</sub>;y<sub>i</sub>].  Calling with f, a function of one argument, is covered in <a href="#each">each</a>.
</p>
<table>
<tr><td><b>i</b></td><td><b>x</b></td><td><b>f[x]</b></td><td><b>a f[x]</b></td><td><b>x:0 1 4 9 16 25</b></td><td><b>+\x</b></td><td><b>3+\x</b></td><td><b>+/x</b></td><td><b>3+/x</b></td></tr>
<tr><td>0</td><td>x<sub>0</sub></td><td>x<sub>0</sub></td><td>f<sub>0</sub>[a;x<sub>0</sub>]</td><td>0</td><td>0</td><td>3</td><td></td><td></td></tr>
<tr><td>1</td><td>x<sub>1</sub></td><td>f<sub>1</sub>[f<sub>0</sub>;x<sub>1</sub>]</td><td>f<sub>1</sub>[f<sub>0</sub>;x<sub>1</sub>]</td><td>1</td><td>1</td><td>4</td><td></td><td></td></tr>
<tr><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td></td><td></td></tr>
<tr><td>j</td><td>x<sub>j</sub></td><td>f<sub>j</sub>[f<sub>j-1</sub>;x<sub>j</sub>]</td><td>f<sub>j</sub>[f<sub>j-1</sub>;x<sub>j</sub>]</td><td>..</td><td>..</td><td>..</td><td></td><td></td></tr>
<tr><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td>..</td><td></td><td></td></tr>
<tr><td>n-2</td><td>x<sub>n-2</sub></td><td>f<sub>n-2</sub>[f<sub>n-3</sub>;x<sub>n-2</sub>]</td><td>f<sub>n-2</sub>[f<sub>n-3</sub>;x<sub>n-2</sub>]</td><td>16</td><td>30</td><td>33</td><td></td><td></td></tr>
<tr><td>n-1</td><td>x<sub>n-1</sub></td><td>f<sub>n-1</sub>[f<sub>n-2</sub>;x<sub>n-1</sub>]</td><td>f<sub>n-1</sub>[f<sub>n-2</sub>;x<sub>n-1</sub>]</td><td>25</td><td>55</td><td>58</td><td>55</td><td>58</td></tr>
</table>


<p>Examples
</p><div class="example">
<pre class="example"> (,\)(&quot;a&quot;;&quot;b&quot;;&quot;c&quot;)   / scan and cat to build up a list
a
ab
abc

 +\1 20 300          / scan and plus to sum over a list
1 21 321

 {y+10*x}\1 20 300   / scan and user func
1 30 600

 {y+10*x}/1 20 300   / over and user func
600

 x:1 2 3               / x+y0, +y1, +y2
 y:10 10 10
 x+\y
11 12 13
21 22 23
31 32 33

 {x+.5*y}\[1 2 3;20 20 20]  / f\y syntax
11 12 13
21 22 23
31 32 33

 1 2 3{x+.5*y}\20 20 20    / i f\x syntax
11 12 13
21 22 23
31 32 33
</pre></div>

<span id="join"></span></div>
<div class="section" id="join-_21d2-c_002fx">
<h3 class="section">3.4 join &rArr; c/x</h3>
<p>Join a list of strings x using character c between each pair.
</p>
<div class="example">
<pre class="example"> &quot;-&quot;/(&quot;Some&quot;;&quot;random text&quot;;&quot;plus&quot;;,&quot;.&quot;)
&quot;Some-random text-plus-.&quot;
</pre></div>

<p>The notaion c/x converts a list of integers x via base c into base 10. In the example below, assuming 2 0 1 are digits in base 8, they convert to  1 + (0*8) + (2*8*8) = 129
</p>
<div class="example">
<pre class="example"> 8/2 0 1  
129
</pre></div>

<span id="split"></span></div>
<div class="section" id="split-_21d2-c_005cx">
<h3 class="section">3.5 split &rArr; c\x</h3>
<p>Split the string x using character c to determine the locations.
</p>
<div class="example">
<pre class="example"> &quot; &quot;\&quot;Here is a short sentence.&quot;
Here     
is       
a        
short    
sentence.
</pre></div>

<p>c\x splits a number x into base c digits.
</p>
<div class="example">
<pre class="example"> 8\129
2 0 1
</pre></div>

<span id="eachprior"></span></div>
<div class="section" id="eachprior-_21d2-f_0027_003a_005bx_003by_005d-or-y-f_0027_003ax">
<h3 class="section">3.6 eachprior &rArr; f&rsquo;:[x;y] or y f&rsquo;:x</h3>
<p>Compute f, a function of two arguments, over list x with optional initial value y.   Concretely f<sub>i</sub>=f[x<sub>i</sub>;x<sub>i-1</sub>] where f<sub>0</sub> returns f[x<sub>0</sub>;i].
</p>
<div class="example">
<pre class="example"> ,':[`i;(`$&quot;x&quot;,'$!5)]
x0 i 
x1 x0
x2 x1
x3 x2
x4 x3

 %':[100;100 101.9 105.1 102.3 106.1] / compute returns
1 1.019 1.031403 0.9733587 1.037146

 100%':100 101.9 105.1 102.3 106.1    / using infix notation
1 1.019 1.031403 0.9733587 1.037146

 101.9{($x),&quot; % &quot;,($y),&quot; = &quot;,$x%y}':100.1 101.9 105.1 102.3 106.1
100.1 % 101.9 = 0.9823356
101.9 % 100.1 = 1.017982 
105.1 % 101.9 = 1.031403 
102.3 % 105.1 = 0.9733587
106.1 % 102.3 = 1.037146 
</pre></div>

<p>Additionally eachp (&rsquo;:) is a multithreaded (parallel) each.  This will allow a function to run using multiple threads over a list of arguments.
</p>
<div class="example">
<pre class="example">\t {L:xrand 1.;sum L%sin L*cos L*sin L+L*L}':8#_50e6 / multiple threads
831

\t {L:xrand 1.;sum L%sin L*cos L*sin L+L*L}'8#_50e6  / single thread
1202
</pre></div>

<span id="eachright"></span></div>
<div class="section" id="eachright-_21d2-f_002f_003a_005bx_003by_005d">
<h3 class="section">3.7 eachright &rArr; f/:[x;y]</h3>
<p>Apply f[x;y] to each value of y, i.e. the right one.
</p>
<div class="example">
<pre class="example"> (!2)+/:!3
0 1
1 2
2 3

 {x+10*y}/:[!2;!3]
0 1  
10 11
20 21

 &quot;pre-&quot;,/:(&quot;apple&quot;;&quot;banana&quot;;&quot;cherry&quot;)
pre-apple 
pre-banana
pre-cherry
</pre></div>

<span id="eachleft"></span></div>
<div class="section" id="eachleft-_21d2-f_005c_003a_005bx_003by_005d">
<h3 class="section">3.8 eachleft &rArr; f\:[x;y]</h3>
<p>Apply f[x;y] to each value of x, i.e. the left one.
</p>
<div class="example">
<pre class="example"> (!2)+\:!3
0 1 2
1 2 3

 {x+10*y}\:[!2;!3]
0 10 20
1 11 21

 (&quot;apple&quot;;&quot;banana&quot;;&quot;cherry&quot;),\:&quot;-post&quot;
apple-post 
banana-post
cherry-post
</pre></div>

<span id="cover"></span></div>
<div class="section" id="Converge-Over-_21d2-g_002f_003ax-or-_0028n_003bg_0029_002f_003ax">
<h3 class="section">3.9 Converge Over &rArr; g/:x or (n;g)/:x</h3>
<p>Converge Over is the same function as <a href="#cscan">Converge Scan</a> but only returns the final value(s).
</p>
<div class="example">
<pre class="example"> r:((1;2);3;(,4));r
1 2
3  
,4 

 ,//:r  / raze over the list until it converges to a flat list
1 2 3 4
</pre></div>

<span id="cscan"></span></div>
<div class="section" id="Converge-Scan-_21d2-g_005c_003ax-or-_0028n_003bg_0029_005c_003ax">
<h3 class="section">3.10 Converge Scan &rArr; g\:x or (n;g)\:x</h3>
<p>Compute function g where g<sub>i</sub>=g[g<sub>i-1</sub>] and g<sub>0</sub>=x.  If n is specified then it is either (DO) the number of iterations or (WHILE) a function returning a non-zero result.  
</p>
<div class="example">
<pre class="example">  {x*x}\:.99           / converge to value
0.99 0.9801 0.9605961 ... 1.323698e-18 1.752177e-36 0.

 (3;{x*x})\:.99        / do 3 times, return 4 values (first is initial)
0.99 0.9801 0.960596 0.9227448

 (.5&lt;;{x*x})\:.99      / while .5 &lt; r, i.e. r is greater than 0.5
0.99 0.9801 0.960596 0.9227448 0.8514579 0.7249806 0.5255968 0.276252

 (4;{x,x+/x+1})\:,0    / do function 4 times
,0                                         
0 1                                        
0 1 3 4                                    
0 1 3 4 12 13 15 16                        
0 1 3 4 12 13 15 16 72 73 75 76 84 85 87 88

 (10&gt;#;{x,x+/x+1})\:,0 / while output is less than 10 long
,0                                         
0 1                                        
0 1 3 4                                    
0 1 3 4 12 13 15 16                        
0 1 3 4 12 13 15 16 72 73 75 76 84 85 87 88

 x:3 4 2 1 4 99        / until output is x
 x\:0
0 3 1 4

 / the latter example worked out manually
 x 0
3
 x 3
1
 x 1
4
 x 4                   / x[4]=4 so will stop
4
</pre></div>



</div>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Noun.html">Noun</a>, Previous: <a href="Verb.html">Verbs</a>, Up: <a href="index.html">k9: Manual</a> &nbsp; </p>
</div>



</body>
</html>
